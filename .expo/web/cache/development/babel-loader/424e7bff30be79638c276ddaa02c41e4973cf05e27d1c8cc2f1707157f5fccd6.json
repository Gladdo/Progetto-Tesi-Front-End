{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport React, { useState, useRef, useEffect } from 'react';\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default function GladPicker(props) {\n  var _useState = useState(props.placeholder),\n    _useState2 = _slicedToArray(_useState, 2),\n    selectedItem = _useState2[0],\n    SetSelectedItem = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    menuVisible = _useState4[0],\n    SetMenuVisibility = _useState4[1];\n  var heightAnim = useRef(new Animated.Value(0)).current;\n  var textHeightAnim = useRef(new Animated.Value(0)).current;\n  var data = props.data;\n  var COMPONENT_WIDTH = props.width;\n  var POPUP_MAXHEIGHT = props.menuMaxHeight;\n  var menuPop = function menuPop() {\n    var nextHeight;\n    var nextTextHeight;\n    if (menuVisible) {\n      nextHeight = 0;\n      nextTextHeight = 0;\n      SetMenuVisibility(false);\n    } else {\n      nextHeight = POPUP_MAXHEIGHT;\n      nextTextHeight = 40;\n      SetMenuVisibility(true);\n    }\n    Animated.timing(heightAnim, {\n      toValue: nextHeight,\n      duration: 200,\n      useNativeDriver: true\n    }).start();\n    Animated.timing(textHeightAnim, {\n      toValue: nextTextHeight,\n      duration: 200,\n      useNativeDriver: true\n    }).start();\n  };\n  var onSelection = function onSelection(itemIndex) {\n    SetSelectedItem(data[itemIndex].name);\n    props.onSelection(data[itemIndex].name);\n    SetMenuVisibility(false);\n    Animated.timing(heightAnim, {\n      toValue: 0,\n      duration: 200,\n      useNativeDriver: true\n    }).start();\n    Animated.timing(textHeightAnim, {\n      toValue: 0,\n      duration: 200,\n      useNativeDriver: true\n    }).start();\n  };\n  var menuItems = [];\n  if (menuVisible) {\n    var _loop = function _loop() {\n      var itemIndex = i;\n      menuItems.push(_jsx(TouchableOpacity, {\n        onPress: function onPress() {\n          onSelection(itemIndex);\n        },\n        children: _jsx(Animated.View, {\n          style: {\n            height: textHeightAnim,\n            justifyContent: 'center',\n            borderBottomWidth: 1\n          },\n          children: _jsxs(Animated.Text, {\n            style: {\n              height: textHeightAnim * 0.5,\n              textAlign: 'center',\n              fontWeight: 'bold',\n              fontSize: 14\n            },\n            children: [\" \", data[i].name, \" \"]\n          })\n        })\n      }, i));\n    };\n    for (var i = 0; i < data.length; i++) {\n      _loop();\n    }\n  }\n  return _jsxs(View, {\n    style: {\n      position: 'relative',\n      height: 40,\n      width: COMPONENT_WIDTH\n    },\n    children: [_jsx(TouchableOpacity, {\n      style: {\n        height: 40,\n        backgroundColor: \"#258ef7\"\n      },\n      onPress: menuPop,\n      children: _jsx(View, {\n        style: {\n          height: '100%',\n          justifyContent: 'center'\n        },\n        children: _jsxs(Text, {\n          style: {\n            textAlign: 'center',\n            color: 'white',\n            fontWeight: 'bold',\n            fontSize: 18\n          },\n          children: [\" \", selectedItem, \" \"]\n        })\n      })\n    }), _jsx(Animated.View, {\n      style: {\n        marginTop: 40,\n        position: 'absolute',\n        width: '100%',\n        maxHeight: heightAnim,\n        backgroundColor: \"#dcecfc\",\n        overflow: 'visible'\n      },\n      children: _jsx(ScrollView, {\n        showsVerticalScrollIndicator: false,\n        scrollEnabled: false,\n        onScroll: function onScroll() {\n          scrollTo({\n            'x': 0,\n            'y': 80,\n            'animated': true\n          });\n        },\n        decelerationRate: 'fast',\n        children: menuItems\n      })\n    })]\n  });\n}","map":{"version":3,"names":["React","useState","useRef","useEffect","TouchableOpacity","jsxs","_jsxs","jsx","_jsx","GladPicker","props","_useState","placeholder","_useState2","_slicedToArray","selectedItem","SetSelectedItem","_useState3","_useState4","menuVisible","SetMenuVisibility","heightAnim","Animated","Value","current","textHeightAnim","data","COMPONENT_WIDTH","width","POPUP_MAXHEIGHT","menuMaxHeight","menuPop","nextHeight","nextTextHeight","timing","toValue","duration","useNativeDriver","start","onSelection","itemIndex","name","menuItems","_loop","i","push","onPress","children","View","style","height","justifyContent","borderBottomWidth","Text","textAlign","fontWeight","fontSize","length","position","backgroundColor","color","marginTop","maxHeight","overflow","ScrollView","showsVerticalScrollIndicator","scrollEnabled","onScroll","scrollTo","decelerationRate"],"sources":["Z:/image-generator-front-end/GladPicker.js"],"sourcesContent":["import {View, Animated, ScrollView, Modal, Text, Image, StyleSheet, FlatList, Button} from 'react-native'\r\nimport React, {useState, useRef, useEffect} from 'react';\r\nimport { TouchableOpacity } from 'react-native-web';\r\n\r\n  /* --------------------------------------------------------------------------------------------------------------------------------------------------- |\r\n  > GLAD PICKER:\r\n  La proprietà data del component dev'essere fillata con elementi del tipo:\r\n  [{\"name\": \"item1\"}, {\"name\": \"item2\"}, ..., {\"name\": \"itemN\"}]\r\n  ----------------------------------------------------------------------------------------------------------------------------------------------- Gladdo */\r\n\r\nexport default function GladPicker(props){\r\n    // -------------------------|\r\n    // FUNCTION STATE VARIABLES\r\n    // -------------------------|\r\n    const [selectedItem, SetSelectedItem] = useState(props.placeholder);\r\n    const [menuVisible, SetMenuVisibility] = useState(false);\r\n\r\n    // -------------------------|\r\n    // ANIMATION VARIABLES\r\n    // -------------------------|\r\n    var heightAnim = useRef(new Animated.Value(0)).current;\r\n    var textHeightAnim = useRef(new Animated.Value(0)).current;\r\n\r\n    // -------------------------|\r\n    // UTILITY VARIABLES\r\n    // -------------------------|\r\n    var data = props.data;\r\n    const COMPONENT_WIDTH= props.width;\r\n    const POPUP_MAXHEIGHT= props.menuMaxHeight;\r\n\r\n    // -------------------------|\r\n    // EVENT FUNCTIONS\r\n    // -------------------------|\r\n\r\n    /* Gladdo: menuPop viene chiamata ogni volta che viene triggerato onPress sulla barra di selezione statica\r\n    La funzione funge come sorta di switch per far comparire e scomparire il menu a comparsa:\r\n        > Se il menu è disabilitato (menuVisible = false), allora si imposta l'height opportuna e si mette menuVisible = true\r\n        > Se il menu è abilitato (menuVisible = true), allora si imposta l'height a 0 e si mette menuVisible = false */\r\n    const menuPop = () => {\r\n        var nextHeight;\r\n        var nextTextHeight;\r\n        if(menuVisible){\r\n            nextHeight=0;\r\n            nextTextHeight=0;\r\n            SetMenuVisibility(false);\r\n        }else{\r\n            nextHeight=POPUP_MAXHEIGHT;\r\n            nextTextHeight=40;\r\n            SetMenuVisibility(true);\r\n        }\r\n\r\n        // Funzione di animazione che interpola i valori di heightAnim nel tempo\r\n        Animated.timing(heightAnim, {\r\n            toValue: nextHeight,\r\n            duration: 200,\r\n            useNativeDriver: true,\r\n        }).start();\r\n\r\n        // Funzione di animazione che interpola i valori di textHeightAnim nel tempo\r\n        Animated.timing(textHeightAnim, {\r\n        toValue: nextTextHeight,\r\n        duration: 200,\r\n        useNativeDriver: true,\r\n        }).start();\r\n    };\r\n\r\n    /* Gladdo: Funzione triggerata all'onPress di un'elemento della lista nel menu a comparsa\r\n    Ogni elemento del menu imposta il proprio valore come argomento alla chiamata itemIndex */\r\n    const onSelection = (itemIndex) => {\r\n        SetSelectedItem(data[itemIndex].name);\r\n        props.onSelection(data[itemIndex].name);\r\n        SetMenuVisibility(false);\r\n\r\n        // Funzione di animazione che interpola i valori di heightAnim nel tempo\r\n        Animated.timing(heightAnim, {\r\n            toValue: 0,\r\n            duration: 200,\r\n            useNativeDriver: true,\r\n        }).start();\r\n\r\n        // Funzione di animazione che interpola i valori di textHeightAnim nel tempo\r\n        Animated.timing(textHeightAnim, {\r\n        toValue: 0,\r\n        duration: 200,\r\n        useNativeDriver: true,\r\n        }).start();\r\n        \r\n    }\r\n\r\n    // -------------------------|\r\n    // PRE-RENDERING\r\n    // -------------------------|\r\n\r\n    // Gladdo: Costruisco la lista di entries del menu a comparsa\r\n    var menuItems = [];\r\n    if(menuVisible){\r\n        for(var i = 0; i < data.length; i ++){\r\n            /* Gladdo: Devo utilizzare un valore const da bindare alla chiamata di onSelection di ciascun elemento; se passo un valore variabile viene passato un riferimento\r\n            ad una stessa variabile PER CIASCUN elemento della lista */\r\n            const itemIndex = i;\r\n            menuItems.push(\r\n                <TouchableOpacity key={i} onPress={() => {onSelection(itemIndex)}}>\r\n                    <Animated.View style={{height: textHeightAnim, justifyContent: 'center', borderBottomWidth: 1}}>\r\n                        <Animated.Text style={{height: textHeightAnim*0.5, textAlign:'center', fontWeight: 'bold', fontSize: 14}} > {data[i].name} </Animated.Text>\r\n                    </Animated.View>\r\n                </TouchableOpacity>\r\n            )\r\n        }\r\n    }\r\n\r\n    // -------------------------|\r\n    // RENDERING\r\n    // -------------------------|\r\n    return(\r\n        <View style={{ position: 'relative', height: 40, width: COMPONENT_WIDTH, }} >\r\n            {/* ------------------------------------------------------|\r\n               BARRA DI SELEZIONE STATICA \r\n            |------------------------------------------------------ */}\r\n            <TouchableOpacity style={{height:40, backgroundColor: \"#258ef7\"}} onPress={menuPop}>\r\n                <View style={{height: '100%', justifyContent: 'center'}}>\r\n                    <Text style={{ textAlign: 'center', color: 'white', fontWeight: 'bold', fontSize: 18}}> {selectedItem} </Text>\r\n                </View> \r\n            </TouchableOpacity>\r\n\r\n            {/* ------------------------------------------------------|\r\n               MENU A COMPARSA\r\n            |------------------------------------------------------ */}\r\n            <Animated.View style={{ marginTop: 40, position: 'absolute', width: '100%', maxHeight: heightAnim, backgroundColor: \"#dcecfc\", overflow: 'visible'}}>\r\n                <ScrollView \r\n                    showsVerticalScrollIndicator={false} \r\n                    scrollEnabled={false}\r\n                    onScroll={()=>{ scrollTo({'x': 0, 'y': 80, 'animated': true}) }}\r\n                    decelerationRate={'fast'} >\r\n                        {menuItems}\r\n                </ScrollView>\r\n            </Animated.View>   \r\n       </View>\r\n\r\n    )\r\n}\r\n\r\n/* NOTA: Per le scrollview lo snapToInterval non è implementato per il web; source:\r\nhttps://stackoverflow.com/questions/49366743/react-native-web-scrollview-snap */"],"mappings":";;;;;;;;;;AACA,OAAOA,KAAK,IAAGC,QAAQ,EAAEC,MAAM,EAAEC,SAAS,QAAO,OAAO;AAAC,OAAAC,gBAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAAA,SAAAC,GAAA,IAAAC,IAAA;AASzD,eAAe,SAASC,UAAUA,CAACC,KAAK,EAAC;EAIrC,IAAAC,SAAA,GAAwCV,QAAQ,CAACS,KAAK,CAACE,WAAW,CAAC;IAAAC,UAAA,GAAAC,cAAA,CAAAH,SAAA;IAA5DI,YAAY,GAAAF,UAAA;IAAEG,eAAe,GAAAH,UAAA;EACpC,IAAAI,UAAA,GAAyChB,QAAQ,CAAC,KAAK,CAAC;IAAAiB,UAAA,GAAAJ,cAAA,CAAAG,UAAA;IAAjDE,WAAW,GAAAD,UAAA;IAAEE,iBAAiB,GAAAF,UAAA;EAKrC,IAAIG,UAAU,GAAGnB,MAAM,CAAC,IAAIoB,QAAQ,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC,CAACC,OAAO;EACtD,IAAIC,cAAc,GAAGvB,MAAM,CAAC,IAAIoB,QAAQ,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC,CAACC,OAAO;EAK1D,IAAIE,IAAI,GAAGhB,KAAK,CAACgB,IAAI;EACrB,IAAMC,eAAe,GAAEjB,KAAK,CAACkB,KAAK;EAClC,IAAMC,eAAe,GAAEnB,KAAK,CAACoB,aAAa;EAU1C,IAAMC,OAAO,GAAG,SAAVA,OAAOA,CAAA,EAAS;IAClB,IAAIC,UAAU;IACd,IAAIC,cAAc;IAClB,IAAGd,WAAW,EAAC;MACXa,UAAU,GAAC,CAAC;MACZC,cAAc,GAAC,CAAC;MAChBb,iBAAiB,CAAC,KAAK,CAAC;IAC5B,CAAC,MAAI;MACDY,UAAU,GAACH,eAAe;MAC1BI,cAAc,GAAC,EAAE;MACjBb,iBAAiB,CAAC,IAAI,CAAC;IAC3B;IAGAE,QAAQ,CAACY,MAAM,CAACb,UAAU,EAAE;MACxBc,OAAO,EAAEH,UAAU;MACnBI,QAAQ,EAAE,GAAG;MACbC,eAAe,EAAE;IACrB,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC;IAGVhB,QAAQ,CAACY,MAAM,CAACT,cAAc,EAAE;MAChCU,OAAO,EAAEF,cAAc;MACvBG,QAAQ,EAAE,GAAG;MACbC,eAAe,EAAE;IACjB,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC;EACd,CAAC;EAID,IAAMC,WAAW,GAAG,SAAdA,WAAWA,CAAIC,SAAS,EAAK;IAC/BxB,eAAe,CAACU,IAAI,CAACc,SAAS,CAAC,CAACC,IAAI,CAAC;IACrC/B,KAAK,CAAC6B,WAAW,CAACb,IAAI,CAACc,SAAS,CAAC,CAACC,IAAI,CAAC;IACvCrB,iBAAiB,CAAC,KAAK,CAAC;IAGxBE,QAAQ,CAACY,MAAM,CAACb,UAAU,EAAE;MACxBc,OAAO,EAAE,CAAC;MACVC,QAAQ,EAAE,GAAG;MACbC,eAAe,EAAE;IACrB,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC;IAGVhB,QAAQ,CAACY,MAAM,CAACT,cAAc,EAAE;MAChCU,OAAO,EAAE,CAAC;MACVC,QAAQ,EAAE,GAAG;MACbC,eAAe,EAAE;IACjB,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC;EAEd,CAAC;EAOD,IAAII,SAAS,GAAG,EAAE;EAClB,IAAGvB,WAAW,EAAC;IAAA,IAAAwB,KAAA,YAAAA,MAAA,EAC0B;MAGjC,IAAMH,SAAS,GAAGI,CAAC;MACnBF,SAAS,CAACG,IAAI,CACVrC,IAAA,CAACJ,gBAAgB;QAAS0C,OAAO,EAAE,SAAAA,QAAA,EAAM;UAACP,WAAW,CAACC,SAAS,CAAC;QAAA,CAAE;QAAAO,QAAA,EAC9DvC,IAAA,CAACc,QAAQ,CAAC0B,IAAI;UAACC,KAAK,EAAE;YAACC,MAAM,EAAEzB,cAAc;YAAE0B,cAAc,EAAE,QAAQ;YAAEC,iBAAiB,EAAE;UAAC,CAAE;UAAAL,QAAA,EAC3FzC,KAAA,CAACgB,QAAQ,CAAC+B,IAAI;YAACJ,KAAK,EAAE;cAACC,MAAM,EAAEzB,cAAc,GAAC,GAAG;cAAE6B,SAAS,EAAC,QAAQ;cAAEC,UAAU,EAAE,MAAM;cAAEC,QAAQ,EAAE;YAAE,CAAE;YAAAT,QAAA,GAAE,GAAC,EAACrB,IAAI,CAACkB,CAAC,CAAC,CAACH,IAAI,EAAC,GAAC;UAAA,CAAe;QAAC,CAChI;MAAC,GAHGG,CAIL,CACtB,CAAC;IACL,CAAC;IAXD,KAAI,IAAIA,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGlB,IAAI,CAAC+B,MAAM,EAAEb,CAAC,EAAG;MAAAD,KAAA;IAAA;EAYxC;EAKA,OACIrC,KAAA,CAAC0C,IAAI;IAACC,KAAK,EAAE;MAAES,QAAQ,EAAE,UAAU;MAAER,MAAM,EAAE,EAAE;MAAEtB,KAAK,EAAED;IAAiB,CAAE;IAAAoB,QAAA,GAIvEvC,IAAA,CAACJ,gBAAgB;MAAC6C,KAAK,EAAE;QAACC,MAAM,EAAC,EAAE;QAAES,eAAe,EAAE;MAAS,CAAE;MAACb,OAAO,EAAEf,OAAQ;MAAAgB,QAAA,EAC/EvC,IAAA,CAACwC,IAAI;QAACC,KAAK,EAAE;UAACC,MAAM,EAAE,MAAM;UAAEC,cAAc,EAAE;QAAQ,CAAE;QAAAJ,QAAA,EACpDzC,KAAA,CAAC+C,IAAI;UAACJ,KAAK,EAAE;YAAEK,SAAS,EAAE,QAAQ;YAAEM,KAAK,EAAE,OAAO;YAAEL,UAAU,EAAE,MAAM;YAAEC,QAAQ,EAAE;UAAE,CAAE;UAAAT,QAAA,GAAC,GAAC,EAAChC,YAAY,EAAC,GAAC;QAAA,CAAM;MAAC,CAC5G;IAAC,CACO,CAAC,EAKnBP,IAAA,CAACc,QAAQ,CAAC0B,IAAI;MAACC,KAAK,EAAE;QAAEY,SAAS,EAAE,EAAE;QAAEH,QAAQ,EAAE,UAAU;QAAE9B,KAAK,EAAE,MAAM;QAAEkC,SAAS,EAAEzC,UAAU;QAAEsC,eAAe,EAAE,SAAS;QAAEI,QAAQ,EAAE;MAAS,CAAE;MAAAhB,QAAA,EAChJvC,IAAA,CAACwD,UAAU;QACPC,4BAA4B,EAAE,KAAM;QACpCC,aAAa,EAAE,KAAM;QACrBC,QAAQ,EAAE,SAAAA,SAAA,EAAI;UAAEC,QAAQ,CAAC;YAAC,GAAG,EAAE,CAAC;YAAE,GAAG,EAAE,EAAE;YAAE,UAAU,EAAE;UAAI,CAAC,CAAC;QAAC,CAAE;QAChEC,gBAAgB,EAAE,MAAO;QAAAtB,QAAA,EACpBL;MAAS,CACN;IAAC,CACF,CAAC;EAAA,CACf,CAAC;AAGd"},"metadata":{},"sourceType":"module","externalDependencies":[]}